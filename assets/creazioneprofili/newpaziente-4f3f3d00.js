import"../styles-fac82e35.js";import"../bootstrap.esm-19ee7221.js";import{f as h}from"../api_wrapper-35c8f065.js";import{f as I}from"../api-71ed6a10.js";document.addEventListener("DOMContentLoaded",()=>{const p=[];function y(t,e,o,n,i,a,l,c,s,d,u,g,v,r){return h("paziente/save",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:{codiceFiscale:t,nome:e,cognome:o,dataNascita:n,indirizzo:i,telefono:a,email:l,sesso:c,tipoDiabete:s,comorbilita:d,farmaciAssunti:u,periodoDiMonitoraggio:g,numeriUtili:v,terapia:r}})}document.getElementById("crea-button").addEventListener("click",function(){const t=document.getElementById("codiceFiscale").value,e=document.getElementById("nome").value,o=document.getElementById("cognome").value,n=document.getElementById("dataNascita").value,i=document.getElementById("indirizzo").value,a=document.getElementById("telefono").value,l=document.getElementById("email").value,c=document.getElementById("sesso").value,s=document.getElementById("tipoDiabete").value,d=document.getElementById("comorbilita").value,u=document.getElementById("farmaciAssunti").value,g=document.getElementById("periodoMonitoraggio").value,v=document.getElementById("numeriUtili").value.split(/, ?/).map(m=>{const f={};return f.numero=m,f}),r={farmaci:p};console.log(r),y(t,e,o,n,i,a,l,c,s,d,u,g,v,r).then(m=>alert(m.msg)).catch(m=>alert(m.response.msg))});function E(){let t=document.getElementById("cerca-farmaco").value;I(t).then(e=>{let o="";for(let n of e.list)o+=`
          <div class="row fw-normal" id="mostra-farmaci">
          <br>
            <div class="col-sm-6" id="nome-farmaco"><br>${n.nomeFarmaco}</div>
            <div class="col-sm-6" id="principio-attivo"><br>${n.principioAttivo}</div>
           </div>
           `;document.getElementById("lista-farmaci").innerHTML=o})}document.getElementById("cerca-button").onclick=E;function B(){const t=document.getElementById("nomeFarmaco").value,e=document.getElementById("dosaggio").value,o=document.getElementById("ora").value,n=document.getElementById("somministrazione").value,i=document.getElementById("noteAggiuntive").value;I(t).then(a=>{a.list.length==0&&alert("farmaco non riconosciuto"),console.log(a);const c=a.list[0].id;p.push({idFarmaco:c,dosaggio:e,orarioAssunzione:o,viaDiSomministrazione:n,noteAggiuntive:i}),e||alert("Il campo dosaggio non può essere vuoto"),z(o)||alert("Il formato dell'ora non è valido"),n||alert("Il campo somministrazione non può essere vuoto"),i.length>300&&alert("Il campo note aggiuntive aggiuntive supera i caratteri consentiti"),document.getElementById("nomeFarmaco").value="",document.getElementById("dosaggio").value="",document.getElementById("ora").value="",document.getElementById("somministrazione").value="",document.getElementById("noteAggiuntive").value=""})}document.getElementById("aggiunta-terapia").onclick=B;function z(t){var e=/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;return e.test(t)}});
